{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luca0\\\\Desktop\\\\delivero\\\\mobile\\\\screens\\\\customer\\\\CustomerOrderTrackingScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nlet MapView, Marker, Polyline;\nif (Platform.OS !== 'web') {\n  try {\n    const Maps = require('react-native-maps');\n    MapView = Maps.default || Maps;\n    Marker = Maps.Marker || Maps.MapMarker || Maps.MarkerAnimated || Maps.MapMarker;\n    Polyline = Maps.Polyline || Maps.MapPolyline;\n  } catch (e) {\n    MapView = null;\n    Marker = null;\n    Polyline = null;\n  }\n}\nimport { ordersAPI } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LeafletTrackingMap = ({\n  riderLocation,\n  customerLocation,\n  order,\n  history = []\n}) => {\n  const mapContainerId = 'customer-tracking-map-' + Math.random().toString(36).slice(2);\n  React.useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\n    document.head.appendChild(link);\n    const script = document.createElement('script');\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\n    script.onload = () => {\n      const L = window.L;\n      if (!L || !document.getElementById(mapContainerId)) return;\n      const riderLat = riderLocation?.latitude || 40.7128;\n      const riderLng = riderLocation?.longitude || -74.0060;\n      const customerLat = customerLocation?.latitude || 40.7100;\n      const customerLng = customerLocation?.longitude || -74.0070;\n      const centerLat = (riderLat + customerLat) / 2;\n      const centerLng = (riderLng + customerLng) / 2;\n      const map = L.map(mapContainerId).setView([centerLat, centerLng], 14);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '¬© OpenStreetMap contributors'\n      }).addTo(map);\n      const riderIcon = L.divIcon({\n        className: 'rider-marker',\n        html: `<div style=\"\n          width: 40px;\n          height: 40px;\n          background: #fee2e2;\n          border: 3px solid #dc2626;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 20px;\n          box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);\n          animation: pulse 2s infinite;\n        \">üèçÔ∏è</div>`,\n        iconSize: [40, 40],\n        iconAnchor: [20, 20],\n        popupAnchor: [0, -20]\n      });\n      L.marker([riderLat, riderLng], {\n        icon: riderIcon\n      }).bindPopup(`<b>üèçÔ∏è Rider in consegna</b><br>ETA: ${order?.eta_minutes || 15} min`).addTo(map).openPopup();\n      const customerIcon = L.divIcon({\n        className: 'customer-marker',\n        html: `<div style=\"\n          width: 40px;\n          height: 40px;\n          background: #dbeafe;\n          border: 3px solid #0284c7;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 20px;\n          box-shadow: 0 2px 8px rgba(2, 132, 199, 0.3);\n        \">üè†</div>`,\n        iconSize: [40, 40],\n        iconAnchor: [20, 20],\n        popupAnchor: [0, -20]\n      });\n      L.marker([customerLat, customerLng], {\n        icon: customerIcon\n      }).bindPopup('<b>üè† La tua posizione</b>').addTo(map);\n      if (history && Array.isArray(history) && history.length > 0) {\n        const pts = history.map(p => [parseFloat(p.latitude), parseFloat(p.longitude)]);\n        L.polyline(pts, {\n          color: '#ef4444',\n          weight: 3\n        }).addTo(map);\n      } else {\n        L.polyline([[riderLat, riderLng], [customerLat, customerLng]], {\n          color: '#3b82f6',\n          weight: 2,\n          opacity: 0.7,\n          dashArray: '5, 5'\n        }).addTo(map);\n      }\n      const bounds = L.latLngBounds([[riderLat, riderLng], [customerLat, customerLng]]);\n      map.fitBounds(bounds, {\n        padding: [100, 100]\n      });\n    };\n    document.head.appendChild(script);\n    const style = document.createElement('style');\n    style.textContent = `\n      @keyframes pulse {\n        0% { transform: scale(1); opacity: 1; }\n        50% { transform: scale(1.1); opacity: 0.8; }\n        100% { transform: scale(1); opacity: 1; }\n      }\n    `;\n    document.head.appendChild(style);\n    return () => {\n      if (document.getElementById(mapContainerId)) {\n        const mapElement = document.getElementById(mapContainerId);\n        if (mapElement._leaflet_map) {\n          mapElement._leaflet_map.remove();\n        }\n      }\n    };\n  }, [riderLocation, customerLocation, order?.eta_minutes]);\n  return _jsxDEV(View, {\n    style: styles.mapContainer,\n    children: _jsxDEV(\"div\", {\n      id: mapContainerId,\n      style: {\n        width: '100%',\n        height: '400px',\n        borderRadius: '12px',\n        overflow: 'hidden'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\nexport default function CustomerOrderTrackingScreen({\n  route,\n  navigation\n}) {\n  const {\n    orderId\n  } = route.params || {};\n  const [order, setOrder] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [riderLocation, setRiderLocation] = useState(null);\n  const [customerLocation, setCustomerLocation] = useState(null);\n  const [trackHistory, setTrackHistory] = useState([]);\n  const [refreshing, setRefreshing] = useState(false);\n  const [timeRemaining, setTimeRemaining] = useState(null);\n  useEffect(() => {\n    if (!orderId) {\n      Alert.alert('Errore', 'ID ordine non fornito');\n      navigation.goBack();\n      return;\n    }\n    loadTrackingInfo();\n    if (Platform.OS === 'web' && navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        setCustomerLocation({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n      });\n    }\n    const interval = setInterval(loadTrackingInfo, 10000);\n    return () => clearInterval(interval);\n  }, [orderId]);\n  useEffect(() => {\n    if (!order?.eta_minutes) return;\n    const etaInterval = setInterval(() => {\n      setOrder(prev => {\n        if (!prev) return prev;\n        const newEta = prev.eta_minutes - 1;\n        if (newEta > 0) {\n          return Object.assign({}, prev, {\n            eta_minutes: newEta\n          });\n        } else {\n          clearInterval(etaInterval);\n          return prev;\n        }\n      });\n    }, 60000);\n    return () => clearInterval(etaInterval);\n  }, [order?.eta_minutes]);\n  const loadTrackingInfo = async () => {\n    try {\n      setRefreshing(true);\n      const trackingData = await ordersAPI.getTrackingInfo(orderId);\n      setOrder(trackingData);\n      if (trackingData.rider_latitude && trackingData.rider_longitude) {\n        setRiderLocation({\n          latitude: parseFloat(trackingData.rider_latitude),\n          longitude: parseFloat(trackingData.rider_longitude)\n        });\n      }\n      try {\n        const pts = await ordersAPI.getTrackHistory(orderId);\n        setTrackHistory(pts.map(p => ({\n          latitude: parseFloat(p.latitude),\n          longitude: parseFloat(p.longitude)\n        })));\n      } catch (e) {\n        console.warn('Could not load track history', e.message);\n      }\n      if (!customerLocation) {\n        setCustomerLocation({\n          latitude: 40.7100,\n          longitude: -74.0070\n        });\n      }\n      setLoading(false);\n    } catch (error) {\n      console.error('Error loading tracking:', error);\n      Alert.alert('Errore', 'Non √® possibile caricare i dettagli della consegna');\n    } finally {\n      setRefreshing(false);\n    }\n  };\n  if (loading) {\n    return _jsxDEV(View, {\n      style: styles.centerContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#FF6B00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"Caricamento tracciamento...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this);\n  }\n  const statusEmoji = {\n    pending: '‚è≥',\n    accepted: '‚úÖ',\n    pickup: 'üì¶',\n    in_transit: 'üöö',\n    delivered: '‚úîÔ∏è'\n  };\n  const statusText = {\n    pending: 'In sospeso',\n    accepted: 'Accettato',\n    pickup: 'In ritiro',\n    in_transit: 'In consegna',\n    delivered: 'Consegnato'\n  };\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.header,\n      children: [_jsxDEV(TouchableOpacity, {\n        onPress: () => navigation.goBack(),\n        children: _jsxDEV(Text, {\n          style: styles.backButton,\n          children: \"\\u2190 Indietro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.title,\n        children: \"\\uD83D\\uDCCD Tracciamento Ordine\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: {\n          width: 40\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.statusContainer,\n      children: [_jsxDEV(Text, {\n        style: styles.statusIcon,\n        children: statusEmoji[order?.status] || 'üì¶'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.statusText,\n        children: statusText[order?.status] || 'Non disponibile'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), order?.eta_minutes && order?.status === 'in_transit' && _jsxDEV(Text, {\n        style: styles.etaText,\n        children: [\"ETA: \", order.eta_minutes, \" minuti\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this), riderLocation && customerLocation && (Platform.OS === 'web' ? _jsxDEV(LeafletTrackingMap, {\n      riderLocation: riderLocation,\n      customerLocation: customerLocation,\n      order: order,\n      history: trackHistory\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 11\n    }, this) : _jsxDEV(View, {\n      style: {\n        height: 300,\n        marginHorizontal: 12,\n        borderRadius: 12,\n        overflow: 'hidden'\n      },\n      children: _jsxDEV(MapView, {\n        style: {\n          flex: 1\n        },\n        initialRegion: {\n          latitude: riderLocation.latitude,\n          longitude: riderLocation.longitude,\n          latitudeDelta: 0.02,\n          longitudeDelta: 0.02\n        },\n        children: [_jsxDEV(Marker, {\n          coordinate: riderLocation,\n          title: \"Rider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 15\n        }, this), _jsxDEV(Marker, {\n          coordinate: customerLocation,\n          title: \"Cliente\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 15\n        }, this), trackHistory.length > 0 && _jsxDEV(Polyline, {\n          coordinates: trackHistory,\n          strokeColor: \"#ef4444\",\n          strokeWidth: 4\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 11\n    }, this)), _jsxDEV(View, {\n      style: styles.detailsContainer,\n      children: [_jsxDEV(Text, {\n        style: styles.sectionTitle,\n        children: \"\\uD83D\\uDCE6 Dettagli Ordine\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.detailRow,\n        children: [_jsxDEV(Text, {\n          style: styles.detailLabel,\n          children: \"ID Ordine:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.detailValue,\n          children: [\"#\", order?.id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.detailRow,\n        children: [_jsxDEV(Text, {\n          style: styles.detailLabel,\n          children: \"Importo:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.detailValue,\n          children: [\"\\u20AC\", parseFloat(order?.total_amount || 0).toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.detailRow,\n        children: [_jsxDEV(Text, {\n          style: styles.detailLabel,\n          children: \"Consegna a:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.detailValue,\n          children: order?.delivery_address || 'Indirizzo non disponibile'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), order?.rider_id && _jsxDEV(View, {\n        style: styles.detailRow,\n        children: [_jsxDEV(Text, {\n          style: styles.detailLabel,\n          children: \"Rider assegnato:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: styles.detailValue,\n          children: [\"ID: \", order.rider_id]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 11\n      }, this), order?.eta_minutes && _jsxDEV(View, {\n        style: styles.etaBox,\n        children: [_jsxDEV(Text, {\n          style: styles.etaBoxTitle,\n          children: \"\\u23F1\\uFE0F Tempo Stimato di Arrivo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), _jsxDEV(Text, {\n          style: styles.etaBoxValue,\n          children: [order.eta_minutes, \" minuti\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), _jsxDEV(TouchableOpacity, {\n      style: styles.refreshButton,\n      onPress: loadTrackingInfo,\n      children: _jsxDEV(Text, {\n        style: styles.refreshButtonText,\n        children: \"\\uD83D\\uDD04 Aggiorna\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa'\n  },\n  centerContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: '#f8f9fa'\n  },\n  loadingText: {\n    marginTop: 12,\n    fontSize: 16,\n    color: '#666'\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingTop: 16,\n    paddingBottom: 12,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0'\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: '#1a1a2e'\n  },\n  backButton: {\n    fontSize: 16,\n    color: '#3b82f6',\n    fontWeight: '500'\n  },\n  statusContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#e3f2fd',\n    marginHorizontal: 12,\n    marginVertical: 12,\n    borderRadius: 8,\n    borderLeftWidth: 4,\n    borderLeftColor: '#3b82f6'\n  },\n  statusIcon: {\n    fontSize: 24,\n    marginRight: 12\n  },\n  statusText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#1a1a2e',\n    flex: 1\n  },\n  etaText: {\n    fontSize: 14,\n    color: '#dc2626',\n    fontWeight: '700'\n  },\n  mapContainer: {\n    height: 300,\n    marginHorizontal: 12,\n    marginVertical: 12,\n    borderRadius: 12,\n    overflow: 'hidden',\n    backgroundColor: '#f0f0f0'\n  },\n  detailsContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#fff',\n    marginHorizontal: 12,\n    marginVertical: 12,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: '#e0e0e0'\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#1a1a2e',\n    marginBottom: 12\n  },\n  detailRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#f0f0f0'\n  },\n  detailLabel: {\n    fontSize: 14,\n    color: '#666',\n    fontWeight: '500'\n  },\n  detailValue: {\n    fontSize: 14,\n    color: '#1a1a2e',\n    fontWeight: '600'\n  },\n  etaBox: {\n    backgroundColor: '#fef3c7',\n    padding: 12,\n    borderRadius: 8,\n    marginTop: 12,\n    borderLeftWidth: 4,\n    borderLeftColor: '#f59e0b'\n  },\n  etaBoxTitle: {\n    fontSize: 14,\n    color: '#92400e',\n    fontWeight: '600',\n    marginBottom: 4\n  },\n  etaBoxValue: {\n    fontSize: 20,\n    fontWeight: '700',\n    color: '#d97706'\n  },\n  refreshButton: {\n    marginHorizontal: 12,\n    marginVertical: 12,\n    paddingVertical: 12,\n    backgroundColor: '#3b82f6',\n    borderRadius: 8,\n    alignItems: 'center'\n  },\n  refreshButtonText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#fff'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","StyleSheet","ActivityIndicator","Alert","TouchableOpacity","Platform","MapView","Marker","Polyline","OS","Maps","require","default","MapMarker","MarkerAnimated","MapPolyline","e","ordersAPI","jsxDEV","_jsxDEV","LeafletTrackingMap","riderLocation","customerLocation","order","history","mapContainerId","Math","random","toString","slice","link","document","createElement","rel","href","head","appendChild","script","src","onload","L","window","getElementById","riderLat","latitude","riderLng","longitude","customerLat","customerLng","centerLat","centerLng","map","setView","tileLayer","maxZoom","attribution","addTo","riderIcon","divIcon","className","html","iconSize","iconAnchor","popupAnchor","marker","icon","bindPopup","eta_minutes","openPopup","customerIcon","Array","isArray","length","pts","p","parseFloat","polyline","color","weight","opacity","dashArray","bounds","latLngBounds","fitBounds","padding","style","textContent","mapElement","_leaflet_map","remove","styles","mapContainer","children","id","width","height","borderRadius","overflow","fileName","_jsxFileName","lineNumber","columnNumber","CustomerOrderTrackingScreen","route","navigation","orderId","params","setOrder","loading","setLoading","setRiderLocation","setCustomerLocation","trackHistory","setTrackHistory","refreshing","setRefreshing","timeRemaining","setTimeRemaining","alert","goBack","loadTrackingInfo","navigator","geolocation","getCurrentPosition","position","coords","interval","setInterval","clearInterval","etaInterval","prev","newEta","Object","assign","trackingData","getTrackingInfo","rider_latitude","rider_longitude","getTrackHistory","console","warn","message","error","centerContainer","size","loadingText","statusEmoji","pending","accepted","pickup","in_transit","delivered","statusText","container","header","onPress","backButton","title","statusContainer","statusIcon","status","etaText","marginHorizontal","flex","initialRegion","latitudeDelta","longitudeDelta","coordinate","coordinates","strokeColor","strokeWidth","detailsContainer","sectionTitle","detailRow","detailLabel","detailValue","total_amount","toFixed","delivery_address","rider_id","etaBox","etaBoxTitle","etaBoxValue","refreshButton","refreshButtonText","create","backgroundColor","justifyContent","alignItems","marginTop","fontSize","flexDirection","paddingHorizontal","paddingTop","paddingBottom","borderBottomWidth","borderBottomColor","fontWeight","paddingVertical","marginVertical","borderLeftWidth","borderLeftColor","marginRight","borderWidth","borderColor","marginBottom"],"sources":["C:/Users/luca0/Desktop/delivero/mobile/screens/customer/CustomerOrderTrackingScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  StyleSheet,\r\n  ActivityIndicator,\r\n  Alert,\r\n  TouchableOpacity,\r\n  Platform,\r\n} from 'react-native';\r\n// Import react-native-maps only on native platforms to avoid web bundler errors\r\nlet MapView, Marker, Polyline;\r\nif (Platform.OS !== 'web') {\r\n  try {\r\n    const Maps = require('react-native-maps');\r\n    MapView = Maps.default || Maps;\r\n    Marker = Maps.Marker || Maps.MapMarker || Maps.MarkerAnimated || Maps.MapMarker;\r\n    Polyline = Maps.Polyline || Maps.MapPolyline;\r\n  } catch (e) {\r\n    MapView = null;\r\n    Marker = null;\r\n    Polyline = null;\r\n  }\r\n}\r\nimport { ordersAPI } from '../../services/api';\r\n\r\n// Leaflet Map for Web\r\nconst LeafletTrackingMap = ({ riderLocation, customerLocation, order, history = [] }) => {\r\n  const mapContainerId = 'customer-tracking-map-' + Math.random().toString(36).slice(2);\r\n\r\n  React.useEffect(() => {\r\n    if (Platform.OS !== 'web') return;\r\n\r\n    // Load Leaflet CSS\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\r\n    document.head.appendChild(link);\r\n\r\n    // Load Leaflet JS\r\n    const script = document.createElement('script');\r\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\r\n    script.onload = () => {\r\n      const L = window.L;\r\n      if (!L || !document.getElementById(mapContainerId)) return;\r\n\r\n      const riderLat = riderLocation?.latitude || 40.7128;\r\n      const riderLng = riderLocation?.longitude || -74.0060;\r\n      const customerLat = customerLocation?.latitude || 40.7100;\r\n      const customerLng = customerLocation?.longitude || -74.0070;\r\n\r\n      // Create map centered between rider and customer\r\n      const centerLat = (riderLat + customerLat) / 2;\r\n      const centerLng = (riderLng + customerLng) / 2;\r\n\r\n      const map = L.map(mapContainerId).setView([centerLat, centerLng], 14);\r\n\r\n      // Add OpenStreetMap tiles\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        maxZoom: 19,\r\n        attribution: '¬© OpenStreetMap contributors',\r\n      }).addTo(map);\r\n\r\n      // Rider marker (red/orange - actively delivering)\r\n      const riderIcon = L.divIcon({\r\n        className: 'rider-marker',\r\n        html: `<div style=\"\r\n          width: 40px;\r\n          height: 40px;\r\n          background: #fee2e2;\r\n          border: 3px solid #dc2626;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 20px;\r\n          box-shadow: 0 2px 8px rgba(220, 38, 38, 0.4);\r\n          animation: pulse 2s infinite;\r\n        \">üèçÔ∏è</div>`,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20],\r\n        popupAnchor: [0, -20],\r\n      });\r\n\r\n      L.marker([riderLat, riderLng], { icon: riderIcon })\r\n        .bindPopup(`<b>üèçÔ∏è Rider in consegna</b><br>ETA: ${order?.eta_minutes || 15} min`)\r\n        .addTo(map)\r\n        .openPopup();\r\n\r\n      // Customer marker (blue - waiting for delivery)\r\n      const customerIcon = L.divIcon({\r\n        className: 'customer-marker',\r\n        html: `<div style=\"\r\n          width: 40px;\r\n          height: 40px;\r\n          background: #dbeafe;\r\n          border: 3px solid #0284c7;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 20px;\r\n          box-shadow: 0 2px 8px rgba(2, 132, 199, 0.3);\r\n        \">üè†</div>`,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20],\r\n        popupAnchor: [0, -20],\r\n      });\r\n\r\n      L.marker([customerLat, customerLng], { icon: customerIcon })\r\n        .bindPopup('<b>üè† La tua posizione</b>')\r\n        .addTo(map);\r\n\r\n      // Draw polyline: use history if available else draw simple line\r\n      if (history && Array.isArray(history) && history.length > 0) {\r\n        const pts = history.map(p => [parseFloat(p.latitude), parseFloat(p.longitude)]);\r\n        L.polyline(pts, { color: '#ef4444', weight: 3 }).addTo(map);\r\n      } else {\r\n        L.polyline([[riderLat, riderLng], [customerLat, customerLng]], {\r\n          color: '#3b82f6',\r\n          weight: 2,\r\n          opacity: 0.7,\r\n          dashArray: '5, 5',\r\n        }).addTo(map);\r\n      }\r\n\r\n      // Fit bounds to show both\r\n      const bounds = L.latLngBounds([[riderLat, riderLng], [customerLat, customerLng]]);\r\n      map.fitBounds(bounds, { padding: [100, 100] });\r\n    };\r\n\r\n    document.head.appendChild(script);\r\n\r\n    // Add CSS for animation\r\n    const style = document.createElement('style');\r\n    style.textContent = `\r\n      @keyframes pulse {\r\n        0% { transform: scale(1); opacity: 1; }\r\n        50% { transform: scale(1.1); opacity: 0.8; }\r\n        100% { transform: scale(1); opacity: 1; }\r\n      }\r\n    `;\r\n    document.head.appendChild(style);\r\n\r\n    return () => {\r\n      if (document.getElementById(mapContainerId)) {\r\n        const mapElement = document.getElementById(mapContainerId);\r\n        if (mapElement._leaflet_map) {\r\n          mapElement._leaflet_map.remove();\r\n        }\r\n      }\r\n    };\r\n  }, [riderLocation, customerLocation, order?.eta_minutes]);\r\n\r\n  return (\r\n    <View style={styles.mapContainer}>\r\n      <div\r\n        id={mapContainerId}\r\n        style={{\r\n          width: '100%',\r\n          height: '400px',\r\n          borderRadius: '12px',\r\n          overflow: 'hidden',\r\n        }}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default function CustomerOrderTrackingScreen({ route, navigation }) {\r\n  const { orderId } = route.params || {};\r\n  const [order, setOrder] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [riderLocation, setRiderLocation] = useState(null);\r\n  const [customerLocation, setCustomerLocation] = useState(null);\r\n  const [trackHistory, setTrackHistory] = useState([]);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [timeRemaining, setTimeRemaining] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!orderId) {\r\n      Alert.alert('Errore', 'ID ordine non fornito');\r\n      navigation.goBack();\r\n      return;\r\n    }\r\n\r\n    loadTrackingInfo();\r\n\r\n    // Get real customer location if on web\r\n    if (Platform.OS === 'web' && navigator.geolocation) {\r\n      navigator.geolocation.getCurrentPosition(\r\n        (position) => {\r\n          setCustomerLocation({\r\n            latitude: position.coords.latitude,\r\n            longitude: position.coords.longitude,\r\n          });\r\n        }\r\n      );\r\n    }\r\n\r\n    // Refresh tracking every 10 seconds\r\n    const interval = setInterval(loadTrackingInfo, 10000);\r\n    return () => clearInterval(interval);\r\n  }, [orderId]);\r\n\r\n  // Update ETA countdown\r\n  useEffect(() => {\r\n    if (!order?.eta_minutes) return;\r\n\r\n    const etaInterval = setInterval(() => {\r\n      setOrder(prev => {\r\n        if (!prev) return prev;\r\n        const newEta = prev.eta_minutes - 1;\r\n        if (newEta > 0) {\r\n          return { ...prev, eta_minutes: newEta };\r\n        } else {\r\n          clearInterval(etaInterval);\r\n          return prev;\r\n        }\r\n      });\r\n    }, 60000); // Update every minute\r\n\r\n    return () => clearInterval(etaInterval);\r\n  }, [order?.eta_minutes]);\r\n\r\n  const loadTrackingInfo = async () => {\r\n    try {\r\n      setRefreshing(true);\r\n      const trackingData = await ordersAPI.getTrackingInfo(orderId);\r\n\r\n      setOrder(trackingData);\r\n\r\n      if (trackingData.rider_latitude && trackingData.rider_longitude) {\r\n        setRiderLocation({\r\n          latitude: parseFloat(trackingData.rider_latitude),\r\n          longitude: parseFloat(trackingData.rider_longitude),\r\n        });\r\n      }\r\n\r\n      // fetch track history\r\n      try {\r\n        const pts = await ordersAPI.getTrackHistory(orderId);\r\n        setTrackHistory(pts.map(p => ({ latitude: parseFloat(p.latitude), longitude: parseFloat(p.longitude) })));\r\n      } catch (e) {\r\n        console.warn('Could not load track history', e.message);\r\n      }\r\n\r\n      // Set default customer location\r\n      if (!customerLocation) {\r\n        setCustomerLocation({\r\n          latitude: 40.7100,\r\n          longitude: -74.0070,\r\n        });\r\n      }\r\n\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Error loading tracking:', error);\r\n      Alert.alert('Errore', 'Non √® possibile caricare i dettagli della consegna');\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.centerContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#FF6B00\" />\r\n        <Text style={styles.loadingText}>Caricamento tracciamento...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  const statusEmoji = {\r\n    pending: '‚è≥',\r\n    accepted: '‚úÖ',\r\n    pickup: 'üì¶',\r\n    in_transit: 'üöö',\r\n    delivered: '‚úîÔ∏è',\r\n  };\r\n\r\n  const statusText = {\r\n    pending: 'In sospeso',\r\n    accepted: 'Accettato',\r\n    pickup: 'In ritiro',\r\n    in_transit: 'In consegna',\r\n    delivered: 'Consegnato',\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <TouchableOpacity onPress={() => navigation.goBack()}>\r\n          <Text style={styles.backButton}>‚Üê Indietro</Text>\r\n        </TouchableOpacity>\r\n        <Text style={styles.title}>üìç Tracciamento Ordine</Text>\r\n        <View style={{ width: 40 }} />\r\n      </View>\r\n\r\n      {/* Status Badge */}\r\n      <View style={styles.statusContainer}>\r\n        <Text style={styles.statusIcon}>{statusEmoji[order?.status] || 'üì¶'}</Text>\r\n        <Text style={styles.statusText}>{statusText[order?.status] || 'Non disponibile'}</Text>\r\n        {order?.eta_minutes && order?.status === 'in_transit' && (\r\n          <Text style={styles.etaText}>ETA: {order.eta_minutes} minuti</Text>\r\n        )}\r\n      </View>\r\n\r\n      {/* Map */}\r\n      {riderLocation && customerLocation && (\r\n        Platform.OS === 'web' ? (\r\n          <LeafletTrackingMap\r\n            riderLocation={riderLocation}\r\n            customerLocation={customerLocation}\r\n            order={order}\r\n            history={trackHistory}\r\n          />\r\n        ) : (\r\n          // Native MapView with Polyline\r\n          <View style={{ height: 300, marginHorizontal: 12, borderRadius: 12, overflow: 'hidden' }}>\r\n            <MapView style={{ flex: 1 }} initialRegion={{\r\n              latitude: riderLocation.latitude,\r\n              longitude: riderLocation.longitude,\r\n              latitudeDelta: 0.02,\r\n              longitudeDelta: 0.02,\r\n            }}>\r\n              <Marker coordinate={riderLocation} title=\"Rider\" />\r\n              <Marker coordinate={customerLocation} title=\"Cliente\" />\r\n              {trackHistory.length > 0 && (\r\n                <Polyline coordinates={trackHistory} strokeColor=\"#ef4444\" strokeWidth={4} />\r\n              )}\r\n            </MapView>\r\n          </View>\r\n        )\r\n      )}\r\n\r\n      {/* Order Details */}\r\n      <View style={styles.detailsContainer}>\r\n        <Text style={styles.sectionTitle}>üì¶ Dettagli Ordine</Text>\r\n\r\n        <View style={styles.detailRow}>\r\n          <Text style={styles.detailLabel}>ID Ordine:</Text>\r\n          <Text style={styles.detailValue}>#{order?.id}</Text>\r\n        </View>\r\n\r\n        <View style={styles.detailRow}>\r\n          <Text style={styles.detailLabel}>Importo:</Text>\r\n          <Text style={styles.detailValue}>‚Ç¨{parseFloat(order?.total_amount || 0).toFixed(2)}</Text>\r\n        </View>\r\n\r\n        <View style={styles.detailRow}>\r\n          <Text style={styles.detailLabel}>Consegna a:</Text>\r\n          <Text style={styles.detailValue}>{order?.delivery_address || 'Indirizzo non disponibile'}</Text>\r\n        </View>\r\n\r\n        {order?.rider_id && (\r\n          <View style={styles.detailRow}>\r\n            <Text style={styles.detailLabel}>Rider assegnato:</Text>\r\n            <Text style={styles.detailValue}>ID: {order.rider_id}</Text>\r\n          </View>\r\n        )}\r\n\r\n        {order?.eta_minutes && (\r\n          <View style={styles.etaBox}>\r\n            <Text style={styles.etaBoxTitle}>‚è±Ô∏è Tempo Stimato di Arrivo</Text>\r\n            <Text style={styles.etaBoxValue}>{order.eta_minutes} minuti</Text>\r\n          </View>\r\n        )}\r\n      </View>\r\n\r\n      {/* Refresh Button */}\r\n      <TouchableOpacity\r\n        style={styles.refreshButton}\r\n        onPress={loadTrackingInfo}\r\n      >\r\n        <Text style={styles.refreshButtonText}>üîÑ Aggiorna</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8f9fa',\r\n  },\r\n  centerContainer: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    backgroundColor: '#f8f9fa',\r\n  },\r\n  loadingText: {\r\n    marginTop: 12,\r\n    fontSize: 16,\r\n    color: '#666',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingTop: 16,\r\n    paddingBottom: 12,\r\n    backgroundColor: '#fff',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e0e0e0',\r\n  },\r\n  title: {\r\n    fontSize: 18,\r\n    fontWeight: '600',\r\n    color: '#1a1a2e',\r\n  },\r\n  backButton: {\r\n    fontSize: 16,\r\n    color: '#3b82f6',\r\n    fontWeight: '500',\r\n  },\r\n  statusContainer: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    backgroundColor: '#e3f2fd',\r\n    marginHorizontal: 12,\r\n    marginVertical: 12,\r\n    borderRadius: 8,\r\n    borderLeftWidth: 4,\r\n    borderLeftColor: '#3b82f6',\r\n  },\r\n  statusIcon: {\r\n    fontSize: 24,\r\n    marginRight: 12,\r\n  },\r\n  statusText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#1a1a2e',\r\n    flex: 1,\r\n  },\r\n  etaText: {\r\n    fontSize: 14,\r\n    color: '#dc2626',\r\n    fontWeight: '700',\r\n  },\r\n  mapContainer: {\r\n    height: 300,\r\n    marginHorizontal: 12,\r\n    marginVertical: 12,\r\n    borderRadius: 12,\r\n    overflow: 'hidden',\r\n    backgroundColor: '#f0f0f0',\r\n  },\r\n  detailsContainer: {\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    backgroundColor: '#fff',\r\n    marginHorizontal: 12,\r\n    marginVertical: 12,\r\n    borderRadius: 8,\r\n    borderWidth: 1,\r\n    borderColor: '#e0e0e0',\r\n  },\r\n  sectionTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#1a1a2e',\r\n    marginBottom: 12,\r\n  },\r\n  detailRow: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingVertical: 8,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#f0f0f0',\r\n  },\r\n  detailLabel: {\r\n    fontSize: 14,\r\n    color: '#666',\r\n    fontWeight: '500',\r\n  },\r\n  detailValue: {\r\n    fontSize: 14,\r\n    color: '#1a1a2e',\r\n    fontWeight: '600',\r\n  },\r\n  etaBox: {\r\n    backgroundColor: '#fef3c7',\r\n    padding: 12,\r\n    borderRadius: 8,\r\n    marginTop: 12,\r\n    borderLeftWidth: 4,\r\n    borderLeftColor: '#f59e0b',\r\n  },\r\n  etaBoxTitle: {\r\n    fontSize: 14,\r\n    color: '#92400e',\r\n    fontWeight: '600',\r\n    marginBottom: 4,\r\n  },\r\n  etaBoxValue: {\r\n    fontSize: 20,\r\n    fontWeight: '700',\r\n    color: '#d97706',\r\n  },\r\n  refreshButton: {\r\n    marginHorizontal: 12,\r\n    marginVertical: 12,\r\n    paddingVertical: 12,\r\n    backgroundColor: '#3b82f6',\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n  },\r\n  refreshButtonText: {\r\n    fontSize: 16,\r\n    fontWeight: '600',\r\n    color: '#fff',\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}