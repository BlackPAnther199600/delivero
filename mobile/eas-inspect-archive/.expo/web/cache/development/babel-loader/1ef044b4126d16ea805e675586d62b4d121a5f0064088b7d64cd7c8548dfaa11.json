{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luca0\\\\Desktop\\\\delivero\\\\mobile\\\\screens\\\\rider\\\\WebMapView.js\";\nimport React, { useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function WebMapView({\n  orders = [],\n  riderLocation = {\n    latitude: 40.7128,\n    longitude: -74.0060\n  }\n}) {\n  const mapContainerId = 'web-map-' + Math.random().toString(36).slice(2);\n  useEffect(() => {\n    if (typeof document === 'undefined') return;\n    if (!document.querySelector('link[href*=\"leaflet\"]')) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\n      document.head.appendChild(link);\n    }\n    const existing = document.querySelector('script[src*=\"leaflet.min.js\"]');\n    if (existing) {\n      initMap();\n      return;\n    }\n    const script = document.createElement('script');\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\n    script.onload = initMap;\n    document.head.appendChild(script);\n    function initMap() {\n      const L = window.L;\n      if (!L || !document.getElementById(mapContainerId)) return;\n      const lat = riderLocation.latitude || 40.7128;\n      const lng = riderLocation.longitude || -74.0060;\n      const map = L.map(mapContainerId).setView([lat, lng], 13);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19\n      }).addTo(map);\n      L.marker([lat, lng]).addTo(map).bindPopup('La tua posizione').openPopup();\n      orders.forEach((order, idx) => {\n        const offsetLat = lat + (idx + 1) * 0.002;\n        const offsetLng = lng + (idx + 1) * 0.002;\n        L.marker([offsetLat, offsetLng]).addTo(map).bindPopup(order.delivery_address || 'Ordine');\n      });\n    }\n    return () => {\n      const el = document.getElementById(mapContainerId);\n      if (el && el._leaflet_map) el._leaflet_map.remove();\n    };\n  }, [orders, riderLocation]);\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: _jsxDEV(\"div\", {\n      id: mapContainerId,\n      style: {\n        width: '100%',\n        height: '350px',\n        borderRadius: 12,\n        overflow: 'hidden'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%'\n  }\n});","map":{"version":3,"names":["React","useEffect","View","StyleSheet","jsxDEV","_jsxDEV","WebMapView","orders","riderLocation","latitude","longitude","mapContainerId","Math","random","toString","slice","document","querySelector","link","createElement","rel","href","head","appendChild","existing","initMap","script","src","onload","L","window","getElementById","lat","lng","map","setView","tileLayer","maxZoom","addTo","marker","bindPopup","openPopup","forEach","order","idx","offsetLat","offsetLng","delivery_address","el","_leaflet_map","remove","style","styles","container","children","id","width","height","borderRadius","overflow","fileName","_jsxFileName","lineNumber","columnNumber","create"],"sources":["C:/Users/luca0/Desktop/delivero/mobile/screens/rider/WebMapView.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\n\r\n// Simple Leaflet-based web map wrapper for RiderHomeScreen\r\nexport default function WebMapView({ orders = [], riderLocation = { latitude: 40.7128, longitude: -74.0060 } }) {\r\n  const mapContainerId = 'web-map-' + Math.random().toString(36).slice(2);\r\n\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    // Load Leaflet CSS if not present\r\n    if (!document.querySelector('link[href*=\"leaflet\"]')) {\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\r\n      document.head.appendChild(link);\r\n    }\r\n\r\n    // Load Leaflet JS\r\n    const existing = document.querySelector('script[src*=\"leaflet.min.js\"]');\r\n    if (existing) {\r\n      initMap();\r\n      return;\r\n    }\r\n\r\n    const script = document.createElement('script');\r\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\r\n    script.onload = initMap;\r\n    document.head.appendChild(script);\r\n\r\n    function initMap() {\r\n      const L = window.L;\r\n      if (!L || !document.getElementById(mapContainerId)) return;\r\n\r\n      const lat = riderLocation.latitude || 40.7128;\r\n      const lng = riderLocation.longitude || -74.0060;\r\n      const map = L.map(mapContainerId).setView([lat, lng], 13);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        maxZoom: 19,\r\n      }).addTo(map);\r\n\r\n      // Rider marker\r\n      L.marker([lat, lng]).addTo(map).bindPopup('La tua posizione').openPopup();\r\n\r\n      // Order markers\r\n      orders.forEach((order, idx) => {\r\n        const offsetLat = lat + ((idx + 1) * 0.002);\r\n        const offsetLng = lng + ((idx + 1) * 0.002);\r\n        L.marker([offsetLat, offsetLng]).addTo(map).bindPopup(order.delivery_address || 'Ordine');\r\n      });\r\n    }\r\n\r\n    return () => {\r\n      const el = document.getElementById(mapContainerId);\r\n      if (el && el._leaflet_map) el._leaflet_map.remove();\r\n    };\r\n  }, [orders, riderLocation]);\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <div id={mapContainerId} style={{ width: '100%', height: '350px', borderRadius: 12, overflow: 'hidden' }} />\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    width: '100%',\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}