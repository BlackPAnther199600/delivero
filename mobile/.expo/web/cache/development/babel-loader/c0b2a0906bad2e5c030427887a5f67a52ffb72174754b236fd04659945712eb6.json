{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\luca0\\\\Desktop\\\\delivero\\\\mobile\\\\screens\\\\rider\\\\RiderHomeScreen.js\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport * as Location from 'expo-location';\nimport { ordersAPI } from '../../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet WebMapView;\nif (Platform.OS === 'web') {\n  try {\n    WebMapView = require('./WebMapView').default;\n  } catch (e) {\n    WebMapView = null;\n  }\n}\nlet MapView, Marker;\nif (Platform.OS !== 'web') {\n  try {\n    const Maps = require('react-native-maps');\n    MapView = Maps.default;\n    Marker = Maps.Marker;\n  } catch (e) {\n    MapView = null;\n    Marker = null;\n  }\n}\nconst CATEGORY_EMOJI = {\n  food: 'üçî',\n  pharmacy: 'üíä',\n  groceries: 'üõí',\n  clothes: 'üëï',\n  electronics: 'üíª',\n  restaurants: 'üçΩÔ∏è'\n};\nconst LeafletMapComponent = ({\n  orders,\n  riderLocation\n}) => {\n  const mapContainerId = 'rider-map-' + Math.random().toString(36).slice(2);\n  React.useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    const link = document.createElement('link');\n    link.rel = 'stylesheet';\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\n    document.head.appendChild(link);\n    const script = document.createElement('script');\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\n    script.onload = () => {\n      const L = window.L;\n      if (!L || !document.getElementById(mapContainerId)) return;\n      const riderLat = riderLocation?.latitude || 40.7128;\n      const riderLng = riderLocation?.longitude || -74.0060;\n      const map = L.map(mapContainerId).setView([riderLat, riderLng], 14);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 19,\n        attribution: '¬© OpenStreetMap contributors'\n      }).addTo(map);\n      const riderIcon = L.divIcon({\n        className: 'rider-marker',\n        html: `<div style=\"\n          width: 40px;\n          height: 40px;\n          background: #dcfce7;\n          border: 3px solid #22863a;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 20px;\n          box-shadow: 0 2px 4px rgba(34, 134, 58, 0.3);\n        \">üü¢</div>`,\n        iconSize: [40, 40],\n        iconAnchor: [20, 20],\n        popupAnchor: [0, -20]\n      });\n      L.marker([riderLat, riderLng], {\n        icon: riderIcon\n      }).bindPopup('<b>üü¢ La tua posizione</b>').addTo(map).openPopup();\n      if (Array.isArray(orders) && orders.length > 0) {\n        orders.forEach((order, index) => {\n          const lat = riderLat + index * 0.004 - 0.008;\n          const lng = riderLng + Math.sin(index) * 0.006;\n          const orderIcon = L.divIcon({\n            className: 'order-marker',\n            html: `<div style=\"\n              width: 50px;\n              height: 50px;\n              background: #dbeafe;\n              border: 3px solid #3182ce;\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-size: 24px;\n              box-shadow: 0 2px 4px rgba(49, 130, 206, 0.3);\n              cursor: pointer;\n            \">üîµ</div>`,\n            iconSize: [50, 50],\n            iconAnchor: [25, 25],\n            popupAnchor: [0, -25]\n          });\n          const popupContent = `\n            <div style=\"font-size: 12px; font-family: sans-serif; min-width: 180px;\">\n              <b style=\"color: #1a1a2e;\">üçî ${order.items?.[0]?.name || 'Ordine'}</b><br>\n              <span style=\"color: #666;\">üìç A ${(order.distance || 2).toFixed(1)} km</span><br>\n              <b style=\"color: #1a1a2e; font-size: 14px;\">‚Ç¨${(order.total_amount || 0).toFixed(2)}</b><br>\n              <span style=\"color: #22863a; font-weight: bold; font-size: 11px;\">\n                üíµ Guadagno: +‚Ç¨${((order.total_amount || 0) * 0.15).toFixed(2)}\n              </span><br>\n              <span style=\"color: #718096; font-size: 10px; display: block; margin-top: 6px;\">\n                üìç ${order.delivery_address?.substring(0, 40) || 'Indirizzo'}\n              </span>\n            </div>\n          `;\n          L.marker([lat, lng], {\n            icon: orderIcon\n          }).bindPopup(popupContent).addTo(map);\n        });\n        const bounds = L.latLngBounds([[riderLat, riderLng]]);\n        orders.forEach((_, index) => {\n          const lat = riderLat + index * 0.004 - 0.008;\n          const lng = riderLng + Math.sin(index) * 0.006;\n          bounds.extend([lat, lng]);\n        });\n        map.fitBounds(bounds, {\n          padding: [50, 50]\n        });\n      }\n    };\n    document.head.appendChild(script);\n    return () => {\n      if (document.getElementById(mapContainerId)) {\n        const mapElement = document.getElementById(mapContainerId);\n        if (mapElement._leaflet_map) {\n          mapElement._leaflet_map.remove();\n        }\n      }\n    };\n  }, [orders, riderLocation]);\n  return _jsxDEV(View, {\n    style: styles.leafletMapContainer,\n    children: [_jsxDEV(View, {\n      style: styles.leafletMapHeader,\n      children: [_jsxDEV(Text, {\n        style: styles.leafletMapTitle,\n        children: \"\\uD83D\\uDDFA\\uFE0F Mappa Ordini\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.leafletMapSubtitle,\n        children: \"Clicca su un marker per i dettagli\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      id: mapContainerId,\n      style: {\n        width: '100%',\n        height: '350px',\n        borderRadius: '0 0 14px 14px',\n        overflow: 'hidden'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 5\n  }, this);\n};\nexport default function RiderHomeScreen({\n  navigation\n}) {\n  const [orders, setOrders] = useState([]);\n  const [location, setLocation] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n  const [todayEarnings, setTodayEarnings] = useState(0);\n  const [acceptedOrdersCount, setAcceptedOrdersCount] = useState(0);\n  const [showMap, setShowMap] = useState(false);\n  const [mapRegion, setMapRegion] = useState({\n    latitude: 40.7128,\n    longitude: -74.0060,\n    latitudeDelta: 0.05,\n    longitudeDelta: 0.05\n  });\n  const [activeDeliveryOrder, setActiveDeliveryOrder] = useState(null);\n  useEffect(() => {\n    initializeRider();\n    const interval = setInterval(loadAvailableOrders, 30000);\n    return () => clearInterval(interval);\n  }, []);\n  useEffect(() => {\n    if (!location) return;\n    const checkAndTrackDelivery = async () => {\n      try {\n        const activeOrders = await ordersAPI.getActiveRiderOrders();\n        const inDelivery = activeOrders.find(o => o.status === 'in_transit' || o.status === 'pickup');\n        if (inDelivery) {\n          setActiveDeliveryOrder(inDelivery);\n          await sendLocationToBackend(inDelivery.id, location);\n        } else {\n          setActiveDeliveryOrder(null);\n        }\n      } catch (error) {\n        console.error('Error tracking delivery:', error);\n      }\n    };\n    checkAndTrackDelivery();\n    const trackingInterval = setInterval(checkAndTrackDelivery, 30000);\n    return () => clearInterval(trackingInterval);\n  }, [location]);\n  const sendLocationToBackend = async (orderId, userLocation) => {\n    try {\n      const eta = calculateETA(userLocation);\n      const response = await ordersAPI.updateRiderLocation(orderId, userLocation.latitude, userLocation.longitude, eta);\n      console.log('Location sent:', response);\n    } catch (error) {\n      console.error('Error sending location:', error);\n    }\n  };\n  const calculateETA = userLocation => {\n    if (!activeDeliveryOrder) return 20;\n    const distance = calculateDistance(userLocation.latitude, userLocation.longitude, 40.7150, -74.0050);\n    const speedKmPerHour = 20;\n    const etaMinutes = Math.ceil(parseFloat(distance) / speedKmPerHour * 60);\n    return Math.max(5, Math.min(60, etaMinutes));\n  };\n  const initializeRider = async () => {\n    try {\n      let userLocation = {\n        latitude: 40.7128,\n        longitude: -74.0060\n      };\n      if (Platform.OS === 'web') {\n        userLocation = await new Promise((resolve, reject) => {\n          if (navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(position => {\n              resolve({\n                latitude: position.coords.latitude,\n                longitude: position.coords.longitude\n              });\n            }, error => {\n              console.log('Geolocation error:', error);\n              resolve({\n                latitude: 40.7128,\n                longitude: -74.0060\n              });\n            }, {\n              timeout: 10000\n            });\n          } else {\n            resolve({\n              latitude: 40.7128,\n              longitude: -74.0060\n            });\n          }\n        });\n      } else {\n        const {\n          status\n        } = await Location.requestForegroundPermissionsAsync();\n        if (status === 'granted') {\n          try {\n            const currentLocation = await Location.getCurrentPositionAsync({\n              accuracy: Location.Accuracy.High\n            });\n            userLocation = {\n              latitude: currentLocation.coords.latitude,\n              longitude: currentLocation.coords.longitude\n            };\n          } catch (locError) {\n            console.log('Location error:', locError);\n          }\n        }\n      }\n      setLocation(userLocation);\n      const savedEarnings = await AsyncStorage.getItem('todayEarnings');\n      if (savedEarnings) setTodayEarnings(parseFloat(savedEarnings));\n      await loadAvailableOrders();\n      setLoading(false);\n    } catch (error) {\n      console.error('Initialize error:', error);\n      setLocation({\n        latitude: 40.7128,\n        longitude: -74.0060\n      });\n      setLoading(false);\n    }\n  };\n  const loadAvailableOrders = async () => {\n    try {\n      setRefreshing(true);\n      const response = await ordersAPI.getAvailable();\n      const ordersArray = Array.isArray(response) ? response : [];\n      const sortedOrders = sortOrdersByDistance(ordersArray);\n      setOrders(sortedOrders);\n    } catch (error) {\n      console.error('Error loading orders:', error);\n    } finally {\n      setRefreshing(false);\n    }\n  };\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\n    const R = 6371;\n    const dLat = (lat2 - lat1) * Math.PI / 180;\n    const dLon = (lon2 - lon1) * Math.PI / 180;\n    const a = 0.5 - Math.cos(dLat) / 2 + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * (1 - Math.cos(dLon)) / 2;\n    return Math.sqrt(2 * R * R * a).toFixed(1);\n  };\n  const sortOrdersByDistance = orders => {\n    if (!location) return orders;\n    return orders.map(order => {\n      const distance = calculateDistance(location.latitude, location.longitude, 40.7150 + Math.random() * 0.02, -74.0050 + Math.random() * 0.02);\n      return Object.assign({}, order, {\n        distance: parseFloat(distance)\n      });\n    }).sort((a, b) => a.distance - b.distance);\n  };\n  const handleAcceptOrder = async orderId => {\n    try {\n      await ordersAPI.acceptOrder(orderId);\n      const order = orders.find(o => o.id === orderId);\n      const estimatedEarnings = order?.total_price * 0.15 || 2.5;\n      const newTotal = todayEarnings + estimatedEarnings;\n      setTodayEarnings(newTotal);\n      await AsyncStorage.setItem('todayEarnings', newTotal.toString());\n      setAcceptedOrdersCount(acceptedOrdersCount + 1);\n      Alert.alert('‚úÖ Ordine Accettato!', `Guadagnerai ~‚Ç¨${estimatedEarnings.toFixed(2)}`);\n      loadAvailableOrders();\n    } catch (error) {\n      Alert.alert('Errore', 'Non puoi accettare questo ordine');\n    }\n  };\n  const handleLogout = async () => {\n    await AsyncStorage.removeItem('token');\n    await AsyncStorage.removeItem('user');\n    navigation.reset({\n      index: 0,\n      routes: [{\n        name: 'Auth'\n      }]\n    });\n  };\n  const toNumber = val => {\n    if (val === null || val === undefined) return 0;\n    const num = parseFloat(val);\n    return isNaN(num) ? 0 : num;\n  };\n  const formatCurrency = (amount, decimals = 2) => {\n    return toNumber(amount).toFixed(decimals);\n  };\n  const sortedOrders = sortOrdersByDistance(orders);\n  if (loading) {\n    return _jsxDEV(View, {\n      style: styles.centerContainer,\n      children: [_jsxDEV(ActivityIndicator, {\n        size: \"large\",\n        color: \"#FF6B00\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), _jsxDEV(Text, {\n        style: styles.loadingText,\n        children: \"Caricamento ordini...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.header,\n      children: [_jsxDEV(View, {\n        children: [_jsxDEV(Text, {\n          style: styles.headerTitle,\n          children: \"\\uD83D\\uDE9A Ordini Disponibili\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.headerSubtitle,\n          children: \"Guadagna ritirando e consegnando\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 9\n      }, this), _jsxDEV(TouchableOpacity, {\n        style: styles.logoutBtn,\n        onPress: handleLogout,\n        children: _jsxDEV(Text, {\n          style: styles.logoutIcon,\n          children: \"\\uD83D\\uDEAA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 7\n    }, this), _jsxDEV(View, {\n      style: styles.statsBar,\n      children: [_jsxDEV(View, {\n        style: styles.statItem,\n        children: [_jsxDEV(Text, {\n          style: styles.statIcon,\n          children: \"\\u20AC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statValue,\n          children: todayEarnings.toFixed(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statLabel,\n          children: \"Oggi\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 442,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.divider\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.statItem,\n        children: [_jsxDEV(Text, {\n          style: styles.statIcon,\n          children: \"\\u2705\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statValue,\n          children: acceptedOrdersCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 447,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statLabel,\n          children: \"Accettati\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.divider\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 450,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.statItem,\n        children: [_jsxDEV(Text, {\n          style: styles.statIcon,\n          children: \"\\uD83D\\uDCCD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statValue,\n          children: sortedOrders.length\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.statLabel,\n          children: \"Disponibili\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 454,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this), _jsxDEV(TouchableOpacity, {\n      style: styles.mapToggleBtn,\n      onPress: () => setShowMap(!showMap),\n      children: _jsxDEV(Text, {\n        style: styles.mapToggleBtnText,\n        children: showMap ? 'üó∫Ô∏è Chiudi Mappa' : 'üó∫Ô∏è Apri Mappa'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 460,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), showMap && Platform.OS !== 'web' && MapView && _jsxDEV(View, {\n      style: styles.mapContainer,\n      children: _jsxDEV(MapView, {\n        style: styles.map,\n        region: mapRegion,\n        onRegionChange: setMapRegion,\n        children: [_jsxDEV(Marker, {\n          coordinate: {\n            latitude: location?.latitude || 40.7128,\n            longitude: location?.longitude || -74.0060\n          },\n          title: \"La tua posizione\",\n          description: \"Sei qui\",\n          pinColor: \"#22863a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 13\n        }, this), sortedOrders.map((order, index) => _jsxDEV(Marker, {\n          coordinate: {\n            latitude: 40.7128 + (Math.random() - 0.5) * 0.02,\n            longitude: -74.0060 + (Math.random() - 0.5) * 0.02\n          },\n          title: `${order.items?.[0]?.name || 'Ordine'} - ‚Ç¨${formatCurrency(order.total_amount)}`,\n          description: order.delivery_address,\n          pinColor: \"#3182ce\"\n        }, order.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 9\n    }, this), showMap && Platform.OS === 'web' && _jsxDEV(LeafletMapComponent, {\n      orders: sortedOrders,\n      riderLocation: location\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 9\n    }, this), sortedOrders.length === 0 ? _jsxDEV(View, {\n      style: styles.emptyState,\n      children: [_jsxDEV(Text, {\n        style: styles.emptyIcon,\n        children: \"\\uD83D\\uDCED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 506,\n        columnNumber: 11\n      }, this), _jsxDEV(Text, {\n        style: styles.emptyTitle,\n        children: \"Nessun ordine\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 11\n      }, this), _jsxDEV(Text, {\n        style: styles.emptyText,\n        children: \"Non ci sono ordini disponibili al momento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), _jsxDEV(TouchableOpacity, {\n        style: styles.refreshBtn,\n        onPress: loadAvailableOrders,\n        children: _jsxDEV(Text, {\n          style: styles.refreshBtnText,\n          children: \"\\uD83D\\uDD04 Riprova\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 9\n    }, this) : _jsxDEV(FlatList, {\n      data: sortedOrders,\n      keyExtractor: item => item.id?.toString() || Math.random().toString(),\n      renderItem: ({\n        item\n      }) => _jsxDEV(View, {\n        style: styles.orderCard,\n        children: [_jsxDEV(View, {\n          style: styles.cardHeader,\n          children: [_jsxDEV(View, {\n            style: styles.categoryBadge,\n            children: _jsxDEV(Text, {\n              style: styles.categoryIcon,\n              children: \"\\uD83C\\uDF54\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 522,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 521,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: styles.headerInfo,\n            children: [_jsxDEV(Text, {\n              style: styles.orderTitle,\n              numberOfLines: 1,\n              children: item.items?.[0]?.name || 'Ordine'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 525,\n              columnNumber: 19\n            }, this), _jsxDEV(Text, {\n              style: styles.orderMeta,\n              children: [\"\\uD83D\\uDCCD \", (item.distance || 2).toFixed(1), \" km \\u2022 \\u23F1\\uFE0F 20-30 min\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: styles.distancePriceBox,\n            children: [_jsxDEV(Text, {\n              style: styles.earnAmount,\n              children: [\"\\u20AC\", formatCurrency(toNumber(item.total_amount) * 0.15)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 19\n            }, this), _jsxDEV(Text, {\n              style: styles.earnLabel,\n              children: \"guadagno\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 534,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 520,\n          columnNumber: 15\n        }, this), _jsxDEV(View, {\n          style: styles.addressSection,\n          children: [_jsxDEV(Text, {\n            style: styles.addressLabel,\n            children: \"\\uD83D\\uDCCD Consegna a:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 540,\n            columnNumber: 17\n          }, this), _jsxDEV(Text, {\n            style: styles.address,\n            numberOfLines: 2,\n            children: item.delivery_address || 'Indirizzo non disponibile'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 541,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 15\n        }, this), _jsxDEV(View, {\n          style: styles.priceSection,\n          children: [_jsxDEV(View, {\n            children: [_jsxDEV(Text, {\n              style: styles.priceLabel,\n              children: \"Importo ordine\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 19\n            }, this), _jsxDEV(Text, {\n              style: styles.priceValue,\n              children: [\"\\u20AC\", formatCurrency(item.total_amount)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 17\n          }, this), _jsxDEV(View, {\n            style: styles.earnBadge,\n            children: _jsxDEV(Text, {\n              style: styles.earnBadgeText,\n              children: [\"+\\u20AC\", formatCurrency(toNumber(item.total_amount) * 0.15), \" guadagno\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 552,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 15\n        }, this), _jsxDEV(TouchableOpacity, {\n          style: styles.acceptBtn,\n          onPress: () => handleAcceptOrder(item.id),\n          children: _jsxDEV(Text, {\n            style: styles.acceptBtnText,\n            children: \"\\u2705 Accetta Ordine\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 518,\n        columnNumber: 13\n      }, this),\n      refreshing: refreshing,\n      onRefresh: loadAvailableOrders,\n      contentContainerStyle: styles.listContainer,\n      scrollEnabled: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 425,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f9fa'\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingTop: 20,\n    paddingBottom: 25,\n    backgroundColor: '#1a1a2e',\n    marginTop: 0\n  },\n  headerTitle: {\n    fontSize: 24,\n    fontWeight: '700',\n    color: '#fff',\n    marginBottom: 4\n  },\n  headerSubtitle: {\n    fontSize: 13,\n    color: '#a0aec0',\n    fontWeight: '400'\n  },\n  logoutBtn: {\n    width: 45,\n    height: 45,\n    borderRadius: 22.5,\n    backgroundColor: 'rgba(255,255,255,0.15)',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  logoutIcon: {\n    fontSize: 22\n  },\n  statsBar: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    paddingVertical: 16,\n    paddingHorizontal: 10,\n    backgroundColor: '#fff',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  statItem: {\n    flex: 1,\n    alignItems: 'center'\n  },\n  statIcon: {\n    fontSize: 22,\n    marginBottom: 6\n  },\n  statValue: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: '#1a1a2e',\n    marginBottom: 2\n  },\n  statLabel: {\n    fontSize: 11,\n    color: '#718096',\n    fontWeight: '500'\n  },\n  divider: {\n    width: 1,\n    height: 40,\n    backgroundColor: '#e2e8f0',\n    marginHorizontal: 5\n  },\n  emptyState: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 20\n  },\n  emptyIcon: {\n    fontSize: 80,\n    marginBottom: 20\n  },\n  emptyTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: '#1a1a2e',\n    marginBottom: 8\n  },\n  emptyText: {\n    fontSize: 14,\n    color: '#718096',\n    textAlign: 'center',\n    marginBottom: 20\n  },\n  refreshBtn: {\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    backgroundColor: '#3182ce',\n    borderRadius: 8\n  },\n  refreshBtnText: {\n    color: '#fff',\n    fontWeight: '600',\n    fontSize: 14\n  },\n  listContainer: {\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    paddingBottom: 20\n  },\n  orderCard: {\n    backgroundColor: '#fff',\n    borderRadius: 14,\n    padding: 16,\n    marginVertical: 10,\n    borderWidth: 1,\n    borderColor: '#e2e8f0',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.08,\n    shadowRadius: 4,\n    elevation: 3\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12\n  },\n  categoryBadge: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#fef3c7',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12\n  },\n  categoryIcon: {\n    fontSize: 28\n  },\n  headerInfo: {\n    flex: 1\n  },\n  orderTitle: {\n    fontSize: 15,\n    fontWeight: '700',\n    color: '#1a1a2e',\n    marginBottom: 4\n  },\n  orderMeta: {\n    fontSize: 12,\n    color: '#718096',\n    fontWeight: '500'\n  },\n  distancePriceBox: {\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    backgroundColor: '#f0f4f8',\n    borderRadius: 8,\n    alignItems: 'center'\n  },\n  earnAmount: {\n    fontSize: 16,\n    fontWeight: '700',\n    color: '#22863a',\n    marginBottom: 2\n  },\n  earnLabel: {\n    fontSize: 10,\n    color: '#718096',\n    fontWeight: '500'\n  },\n  addressSection: {\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    backgroundColor: '#f7fafc',\n    borderRadius: 10,\n    marginBottom: 12,\n    borderLeftWidth: 3,\n    borderLeftColor: '#3182ce'\n  },\n  addressLabel: {\n    fontSize: 12,\n    color: '#718096',\n    fontWeight: '600',\n    marginBottom: 6\n  },\n  address: {\n    fontSize: 14,\n    color: '#1a1a2e',\n    fontWeight: '500',\n    lineHeight: 20\n  },\n  priceSection: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 12,\n    paddingVertical: 10,\n    backgroundColor: '#f0fdf4',\n    borderRadius: 10,\n    marginBottom: 12\n  },\n  priceLabel: {\n    fontSize: 12,\n    color: '#718096',\n    fontWeight: '500',\n    marginBottom: 2\n  },\n  priceValue: {\n    fontSize: 16,\n    fontWeight: '700',\n    color: '#1a1a2e'\n  },\n  earnBadge: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    backgroundColor: '#dcfce7',\n    borderRadius: 6\n  },\n  earnBadgeText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#22863a'\n  },\n  acceptBtn: {\n    paddingVertical: 14,\n    backgroundColor: '#22863a',\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexDirection: 'row',\n    shadowColor: '#22863a',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 4\n  },\n  acceptBtnText: {\n    color: '#fff',\n    fontWeight: '700',\n    fontSize: 15\n  },\n  mapToggleBtn: {\n    marginHorizontal: 12,\n    marginVertical: 10,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    backgroundColor: '#3182ce',\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  mapToggleBtnText: {\n    color: '#fff',\n    fontWeight: '600',\n    fontSize: 14\n  },\n  mapContainer: {\n    height: 280,\n    marginHorizontal: 12,\n    marginVertical: 10,\n    borderRadius: 14,\n    overflow: 'hidden',\n    borderWidth: 1,\n    borderColor: '#e2e8f0'\n  },\n  map: {\n    flex: 1\n  },\n  mapFallbackContainer: {\n    height: 280,\n    marginHorizontal: 12,\n    marginVertical: 10,\n    borderRadius: 14,\n    overflow: 'hidden',\n    borderWidth: 1,\n    borderColor: '#e2e8f0',\n    backgroundColor: '#f7fafc'\n  },\n  mapFallback: {\n    flex: 1,\n    paddingHorizontal: 12,\n    paddingVertical: 12\n  },\n  mapFallbackHeader: {\n    marginBottom: 12,\n    paddingBottom: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: '#e2e8f0'\n  },\n  mapFallbackTitle: {\n    fontSize: 14,\n    fontWeight: '700',\n    color: '#1a1a2e'\n  },\n  coordinateItem: {\n    paddingVertical: 10,\n    paddingHorizontal: 8\n  },\n  coordinateLabel: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: '#22863a',\n    marginBottom: 4\n  },\n  orderNameSmall: {\n    fontSize: 13,\n    fontWeight: '600',\n    color: '#1a1a2e',\n    marginBottom: 4\n  },\n  coordinateValue: {\n    fontSize: 11,\n    color: '#718096',\n    fontFamily: 'monospace',\n    marginBottom: 4\n  },\n  addressSmall: {\n    fontSize: 11,\n    color: '#718096',\n    lineHeight: 15\n  },\n  noOrdersText: {\n    fontSize: 13,\n    color: '#718096',\n    textAlign: 'center',\n    paddingVertical: 20\n  },\n  dividerFull: {\n    height: 1,\n    backgroundColor: '#e2e8f0',\n    marginVertical: 8\n  },\n  leafletMapContainer: {\n    marginHorizontal: 12,\n    marginVertical: 10,\n    borderRadius: 14,\n    overflow: 'hidden',\n    borderWidth: 1,\n    borderColor: '#e2e8f0',\n    backgroundColor: '#f7fafc'\n  },\n  leafletMapHeader: {\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: '#f7fafc',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e2e8f0'\n  },\n  leafletMapTitle: {\n    fontSize: 16,\n    fontWeight: '700',\n    color: '#1a1a2e',\n    marginBottom: 4\n  },\n  leafletMapSubtitle: {\n    fontSize: 12,\n    color: '#718096',\n    fontWeight: '500'\n  }\n});","map":{"version":3,"names":["React","useState","useEffect","View","Text","TouchableOpacity","StyleSheet","FlatList","Alert","ActivityIndicator","RefreshControl","Platform","ScrollView","AsyncStorage","Location","ordersAPI","jsxDEV","_jsxDEV","WebMapView","OS","require","default","e","MapView","Marker","Maps","CATEGORY_EMOJI","food","pharmacy","groceries","clothes","electronics","restaurants","LeafletMapComponent","orders","riderLocation","mapContainerId","Math","random","toString","slice","link","document","createElement","rel","href","head","appendChild","script","src","onload","L","window","getElementById","riderLat","latitude","riderLng","longitude","map","setView","tileLayer","maxZoom","attribution","addTo","riderIcon","divIcon","className","html","iconSize","iconAnchor","popupAnchor","marker","icon","bindPopup","openPopup","Array","isArray","length","forEach","order","index","lat","lng","sin","orderIcon","popupContent","items","name","distance","toFixed","total_amount","delivery_address","substring","bounds","latLngBounds","_","extend","fitBounds","padding","mapElement","_leaflet_map","remove","style","styles","leafletMapContainer","children","leafletMapHeader","leafletMapTitle","fileName","_jsxFileName","lineNumber","columnNumber","leafletMapSubtitle","id","width","height","borderRadius","overflow","RiderHomeScreen","navigation","setOrders","location","setLocation","loading","setLoading","refreshing","setRefreshing","todayEarnings","setTodayEarnings","acceptedOrdersCount","setAcceptedOrdersCount","showMap","setShowMap","mapRegion","setMapRegion","latitudeDelta","longitudeDelta","activeDeliveryOrder","setActiveDeliveryOrder","initializeRider","interval","setInterval","loadAvailableOrders","clearInterval","checkAndTrackDelivery","activeOrders","getActiveRiderOrders","inDelivery","find","o","status","sendLocationToBackend","error","console","trackingInterval","orderId","userLocation","eta","calculateETA","response","updateRiderLocation","log","calculateDistance","speedKmPerHour","etaMinutes","ceil","parseFloat","max","min","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","timeout","requestForegroundPermissionsAsync","currentLocation","getCurrentPositionAsync","accuracy","Accuracy","High","locError","savedEarnings","getItem","getAvailable","ordersArray","sortedOrders","sortOrdersByDistance","lat1","lon1","lat2","lon2","R","dLat","PI","dLon","a","cos","sqrt","Object","assign","sort","b","handleAcceptOrder","acceptOrder","estimatedEarnings","total_price","newTotal","setItem","alert","handleLogout","removeItem","reset","routes","toNumber","val","undefined","num","isNaN","formatCurrency","amount","decimals","centerContainer","size","color","loadingText","container","header","headerTitle","headerSubtitle","logoutBtn","onPress","logoutIcon","statsBar","statItem","statIcon","statValue","statLabel","divider","mapToggleBtn","mapToggleBtnText","mapContainer","region","onRegionChange","coordinate","title","description","pinColor","emptyState","emptyIcon","emptyTitle","emptyText","refreshBtn","refreshBtnText","data","keyExtractor","item","renderItem","orderCard","cardHeader","categoryBadge","categoryIcon","headerInfo","orderTitle","numberOfLines","orderMeta","distancePriceBox","earnAmount","earnLabel","addressSection","addressLabel","address","priceSection","priceLabel","priceValue","earnBadge","earnBadgeText","acceptBtn","acceptBtnText","onRefresh","contentContainerStyle","listContainer","scrollEnabled","create","flex","backgroundColor","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingTop","paddingBottom","marginTop","fontSize","fontWeight","marginBottom","paddingVertical","borderBottomWidth","borderBottomColor","marginHorizontal","textAlign","marginVertical","borderWidth","borderColor","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","marginRight","borderLeftWidth","borderLeftColor","lineHeight","mapFallbackContainer","mapFallback","mapFallbackHeader","mapFallbackTitle","coordinateItem","coordinateLabel","orderNameSmall","coordinateValue","fontFamily","addressSmall","noOrdersText","dividerFull"],"sources":["C:/Users/luca0/Desktop/delivero/mobile/screens/rider/RiderHomeScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  StyleSheet,\r\n  FlatList,\r\n  Alert,\r\n  ActivityIndicator,\r\n  RefreshControl,\r\n  Platform,\r\n  ScrollView,\r\n} from 'react-native';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport * as Location from 'expo-location';\r\nimport { ordersAPI } from '../../services/api';\r\n\r\n// WebMapView per mappe web\r\nlet WebMapView;\r\nif (Platform.OS === 'web') {\r\n  try {\r\n    WebMapView = require('./WebMapView').default;\r\n  } catch (e) {\r\n    WebMapView = null;\r\n  }\r\n}\r\n\r\n// MapView solo su mobile, non su web\r\nlet MapView, Marker;\r\nif (Platform.OS !== 'web') {\r\n  try {\r\n    const Maps = require('react-native-maps');\r\n    MapView = Maps.default;\r\n    Marker = Maps.Marker;\r\n  } catch (e) {\r\n    MapView = null;\r\n    Marker = null;\r\n  }\r\n}\r\n\r\nconst CATEGORY_EMOJI = {\r\n  food: 'üçî',\r\n  pharmacy: 'üíä',\r\n  groceries: 'üõí',\r\n  clothes: 'üëï',\r\n  electronics: 'üíª',\r\n  restaurants: 'üçΩÔ∏è',\r\n};\r\n\r\n// Leaflet Map Component for Web\r\nconst LeafletMapComponent = ({ orders, riderLocation }) => {\r\n  const mapContainerId = 'rider-map-' + Math.random().toString(36).slice(2);\r\n  \r\n  React.useEffect(() => {\r\n    if (Platform.OS !== 'web') return;\r\n    \r\n    // Load Leaflet CSS\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css';\r\n    document.head.appendChild(link);\r\n    \r\n    // Load Leaflet JS\r\n    const script = document.createElement('script');\r\n    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js';\r\n    script.onload = () => {\r\n      const L = window.L;\r\n      if (!L || !document.getElementById(mapContainerId)) return;\r\n      \r\n      const riderLat = riderLocation?.latitude || 40.7128;\r\n      const riderLng = riderLocation?.longitude || -74.0060;\r\n      \r\n      // Create map\r\n      const map = L.map(mapContainerId).setView([riderLat, riderLng], 14);\r\n      \r\n      // Add OpenStreetMap tiles\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n        maxZoom: 19,\r\n        attribution: '¬© OpenStreetMap contributors',\r\n      }).addTo(map);\r\n      \r\n      // Rider marker (green)\r\n      const riderIcon = L.divIcon({\r\n        className: 'rider-marker',\r\n        html: `<div style=\"\r\n          width: 40px;\r\n          height: 40px;\r\n          background: #dcfce7;\r\n          border: 3px solid #22863a;\r\n          border-radius: 50%;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          font-size: 20px;\r\n          box-shadow: 0 2px 4px rgba(34, 134, 58, 0.3);\r\n        \">üü¢</div>`,\r\n        iconSize: [40, 40],\r\n        iconAnchor: [20, 20],\r\n        popupAnchor: [0, -20],\r\n      });\r\n      \r\n      L.marker([riderLat, riderLng], { icon: riderIcon })\r\n        .bindPopup('<b>üü¢ La tua posizione</b>')\r\n        .addTo(map)\r\n        .openPopup();\r\n      \r\n      // Order markers (blue)\r\n      if (Array.isArray(orders) && orders.length > 0) {\r\n        orders.forEach((order, index) => {\r\n          const lat = riderLat + (index * 0.004) - 0.008;\r\n          const lng = riderLng + (Math.sin(index) * 0.006);\r\n          \r\n          const orderIcon = L.divIcon({\r\n            className: 'order-marker',\r\n            html: `<div style=\"\r\n              width: 50px;\r\n              height: 50px;\r\n              background: #dbeafe;\r\n              border: 3px solid #3182ce;\r\n              border-radius: 50%;\r\n              display: flex;\r\n              align-items: center;\r\n              justify-content: center;\r\n              font-size: 24px;\r\n              box-shadow: 0 2px 4px rgba(49, 130, 206, 0.3);\r\n              cursor: pointer;\r\n            \">üîµ</div>`,\r\n            iconSize: [50, 50],\r\n            iconAnchor: [25, 25],\r\n            popupAnchor: [0, -25],\r\n          });\r\n          \r\n          const popupContent = `\r\n            <div style=\"font-size: 12px; font-family: sans-serif; min-width: 180px;\">\r\n              <b style=\"color: #1a1a2e;\">üçî ${order.items?.[0]?.name || 'Ordine'}</b><br>\r\n              <span style=\"color: #666;\">üìç A ${(order.distance || 2).toFixed(1)} km</span><br>\r\n              <b style=\"color: #1a1a2e; font-size: 14px;\">‚Ç¨${(order.total_amount || 0).toFixed(2)}</b><br>\r\n              <span style=\"color: #22863a; font-weight: bold; font-size: 11px;\">\r\n                üíµ Guadagno: +‚Ç¨${((order.total_amount || 0) * 0.15).toFixed(2)}\r\n              </span><br>\r\n              <span style=\"color: #718096; font-size: 10px; display: block; margin-top: 6px;\">\r\n                üìç ${order.delivery_address?.substring(0, 40) || 'Indirizzo'}\r\n              </span>\r\n            </div>\r\n          `;\r\n          \r\n          L.marker([lat, lng], { icon: orderIcon })\r\n            .bindPopup(popupContent)\r\n            .addTo(map);\r\n        });\r\n        \r\n        // Auto fit bounds\r\n        const bounds = L.latLngBounds([[riderLat, riderLng]]);\r\n        orders.forEach((_, index) => {\r\n          const lat = riderLat + (index * 0.004) - 0.008;\r\n          const lng = riderLng + (Math.sin(index) * 0.006);\r\n          bounds.extend([lat, lng]);\r\n        });\r\n        map.fitBounds(bounds, { padding: [50, 50] });\r\n      }\r\n    };\r\n    document.head.appendChild(script);\r\n    \r\n    return () => {\r\n      if (document.getElementById(mapContainerId)) {\r\n        const mapElement = document.getElementById(mapContainerId);\r\n        if (mapElement._leaflet_map) {\r\n          mapElement._leaflet_map.remove();\r\n        }\r\n      }\r\n    };\r\n  }, [orders, riderLocation]);\r\n  \r\n  return (\r\n    <View style={styles.leafletMapContainer}>\r\n      <View style={styles.leafletMapHeader}>\r\n        <Text style={styles.leafletMapTitle}>üó∫Ô∏è Mappa Ordini</Text>\r\n        <Text style={styles.leafletMapSubtitle}>Clicca su un marker per i dettagli</Text>\r\n      </View>\r\n      <div\r\n        id={mapContainerId}\r\n        style={{\r\n          width: '100%',\r\n          height: '350px',\r\n          borderRadius: '0 0 14px 14px',\r\n          overflow: 'hidden',\r\n        }}\r\n      />\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default function RiderHomeScreen({ navigation }) {\r\n  const [orders, setOrders] = useState([]);\r\n  const [location, setLocation] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [refreshing, setRefreshing] = useState(false);\r\n  const [todayEarnings, setTodayEarnings] = useState(0);\r\n  const [acceptedOrdersCount, setAcceptedOrdersCount] = useState(0);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [mapRegion, setMapRegion] = useState({\r\n    latitude: 40.7128,\r\n    longitude: -74.0060,\r\n    latitudeDelta: 0.05,\r\n    longitudeDelta: 0.05,\r\n  });\r\n  const [activeDeliveryOrder, setActiveDeliveryOrder] = useState(null);\r\n\r\n  useEffect(() => {\r\n    initializeRider();\r\n    const interval = setInterval(loadAvailableOrders, 30000);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Monitor active deliveries and send location updates\r\n  useEffect(() => {\r\n    if (!location) return;\r\n\r\n    const checkAndTrackDelivery = async () => {\r\n      try {\r\n        const activeOrders = await ordersAPI.getActiveRiderOrders();\r\n        const inDelivery = activeOrders.find(o => o.status === 'in_transit' || o.status === 'pickup');\r\n        \r\n        if (inDelivery) {\r\n          setActiveDeliveryOrder(inDelivery);\r\n          // Send location to backend\r\n          await sendLocationToBackend(inDelivery.id, location);\r\n        } else {\r\n          setActiveDeliveryOrder(null);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error tracking delivery:', error);\r\n      }\r\n    };\r\n\r\n    // Check immediately\r\n    checkAndTrackDelivery();\r\n    \r\n    // Then check every 30 seconds\r\n    const trackingInterval = setInterval(checkAndTrackDelivery, 30000);\r\n    return () => clearInterval(trackingInterval);\r\n  }, [location]);\r\n\r\n  // Send rider location to backend\r\n  const sendLocationToBackend = async (orderId, userLocation) => {\r\n    try {\r\n      const eta = calculateETA(userLocation);\r\n      const response = await ordersAPI.updateRiderLocation(\r\n        orderId,\r\n        userLocation.latitude,\r\n        userLocation.longitude,\r\n        eta\r\n      );\r\n      console.log('Location sent:', response);\r\n    } catch (error) {\r\n      console.error('Error sending location:', error);\r\n    }\r\n  };\r\n\r\n  // Calculate ETA based on distance (simple formula: distance / 20 km/h)\r\n  const calculateETA = (userLocation) => {\r\n    if (!activeDeliveryOrder) return 20;\r\n    \r\n    // For now, return fixed estimate - in production would calculate real distance\r\n    // to delivery address using route optimization service\r\n    const distance = calculateDistance(\r\n      userLocation.latitude,\r\n      userLocation.longitude,\r\n      40.7150,\r\n      -74.0050\r\n    );\r\n    const speedKmPerHour = 20;\r\n    const etaMinutes = Math.ceil((parseFloat(distance) / speedKmPerHour) * 60);\r\n    return Math.max(5, Math.min(60, etaMinutes)); // Between 5 and 60 minutes\r\n  };\r\n\r\n  const initializeRider = async () => {\r\n    try {\r\n      let userLocation = { latitude: 40.7128, longitude: -74.0060 };\r\n\r\n      // Get real location based on platform\r\n      if (Platform.OS === 'web') {\r\n        // Web: Use navigator.geolocation\r\n        userLocation = await new Promise((resolve, reject) => {\r\n          if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(\r\n              (position) => {\r\n                resolve({\r\n                  latitude: position.coords.latitude,\r\n                  longitude: position.coords.longitude,\r\n                });\r\n              },\r\n              (error) => {\r\n                console.log('Geolocation error:', error);\r\n                resolve({ latitude: 40.7128, longitude: -74.0060 }); // Fallback\r\n              },\r\n              { timeout: 10000 }\r\n            );\r\n          } else {\r\n            resolve({ latitude: 40.7128, longitude: -74.0060 }); // Fallback\r\n          }\r\n        });\r\n      } else {\r\n        // Mobile: Use expo-location\r\n        const { status } = await Location.requestForegroundPermissionsAsync();\r\n        if (status === 'granted') {\r\n          try {\r\n            const currentLocation = await Location.getCurrentPositionAsync({\r\n              accuracy: Location.Accuracy.High,\r\n            });\r\n            userLocation = {\r\n              latitude: currentLocation.coords.latitude,\r\n              longitude: currentLocation.coords.longitude,\r\n            };\r\n          } catch (locError) {\r\n            console.log('Location error:', locError);\r\n          }\r\n        }\r\n      }\r\n\r\n      setLocation(userLocation);\r\n      \r\n      const savedEarnings = await AsyncStorage.getItem('todayEarnings');\r\n      if (savedEarnings) setTodayEarnings(parseFloat(savedEarnings));\r\n      \r\n      await loadAvailableOrders();\r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Initialize error:', error);\r\n      setLocation({ latitude: 40.7128, longitude: -74.0060 });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadAvailableOrders = async () => {\r\n    try {\r\n      setRefreshing(true);\r\n      const response = await ordersAPI.getAvailable();\r\n      const ordersArray = Array.isArray(response) ? response : [];\r\n      const sortedOrders = sortOrdersByDistance(ordersArray);\r\n      setOrders(sortedOrders);\r\n    } catch (error) {\r\n      console.error('Error loading orders:', error);\r\n    } finally {\r\n      setRefreshing(false);\r\n    }\r\n  };\r\n\r\n  const calculateDistance = (lat1, lon1, lat2, lon2) => {\r\n    const R = 6371;\r\n    const dLat = (lat2 - lat1) * Math.PI / 180;\r\n    const dLon = (lon2 - lon1) * Math.PI / 180;\r\n    const a = 0.5 - Math.cos(dLat) / 2 + \r\n      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * (1 - Math.cos(dLon)) / 2;\r\n    return (Math.sqrt(2 * R * R * a)).toFixed(1);\r\n  };\r\n\r\n  const sortOrdersByDistance = (orders) => {\r\n    if (!location) return orders;\r\n    \r\n    return orders\r\n      .map(order => {\r\n        const distance = calculateDistance(\r\n          location.latitude, \r\n          location.longitude,\r\n          40.7150 + Math.random() * 0.02,\r\n          -74.0050 + Math.random() * 0.02\r\n        );\r\n        return { ...order, distance: parseFloat(distance) };\r\n      })\r\n      .sort((a, b) => a.distance - b.distance);\r\n  };\r\n\r\n  const handleAcceptOrder = async (orderId) => {\r\n    try {\r\n      await ordersAPI.acceptOrder(orderId);\r\n      \r\n      const order = orders.find(o => o.id === orderId);\r\n      const estimatedEarnings = order?.total_price * 0.15 || 2.5;\r\n      const newTotal = todayEarnings + estimatedEarnings;\r\n      setTodayEarnings(newTotal);\r\n      await AsyncStorage.setItem('todayEarnings', newTotal.toString());\r\n      \r\n      setAcceptedOrdersCount(acceptedOrdersCount + 1);\r\n      Alert.alert('‚úÖ Ordine Accettato!', `Guadagnerai ~‚Ç¨${estimatedEarnings.toFixed(2)}`);\r\n      loadAvailableOrders();\r\n    } catch (error) {\r\n      Alert.alert('Errore', 'Non puoi accettare questo ordine');\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await AsyncStorage.removeItem('token');\r\n    await AsyncStorage.removeItem('user');\r\n    navigation.reset({\r\n      index: 0,\r\n      routes: [{ name: 'Auth' }],\r\n    });\r\n  };\r\n\r\n  // Helper function to safely convert to number\r\n  const toNumber = (val) => {\r\n    if (val === null || val === undefined) return 0;\r\n    const num = parseFloat(val);\r\n    return isNaN(num) ? 0 : num;\r\n  };\r\n\r\n  // Helper to format currency safely\r\n  const formatCurrency = (amount, decimals = 2) => {\r\n    return toNumber(amount).toFixed(decimals);\r\n  };\r\n\r\n  const sortedOrders = sortOrdersByDistance(orders);\r\n\r\n  if (loading) {\r\n    return (\r\n      <View style={styles.centerContainer}>\r\n        <ActivityIndicator size=\"large\" color=\"#FF6B00\" />\r\n        <Text style={styles.loadingText}>Caricamento ordini...</Text>\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      {/* Header con gradient */}\r\n      <View style={styles.header}>\r\n        <View>\r\n          <Text style={styles.headerTitle}>üöö Ordini Disponibili</Text>\r\n          <Text style={styles.headerSubtitle}>Guadagna ritirando e consegnando</Text>\r\n        </View>\r\n        <TouchableOpacity style={styles.logoutBtn} onPress={handleLogout}>\r\n          <Text style={styles.logoutIcon}>üö™</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n\r\n      {/* Stats Dashboard */}\r\n      <View style={styles.statsBar}>\r\n        <View style={styles.statItem}>\r\n          <Text style={styles.statIcon}>‚Ç¨</Text>\r\n          <Text style={styles.statValue}>{todayEarnings.toFixed(2)}</Text>\r\n          <Text style={styles.statLabel}>Oggi</Text>\r\n        </View>\r\n        <View style={styles.divider}></View>\r\n        <View style={styles.statItem}>\r\n          <Text style={styles.statIcon}>‚úÖ</Text>\r\n          <Text style={styles.statValue}>{acceptedOrdersCount}</Text>\r\n          <Text style={styles.statLabel}>Accettati</Text>\r\n        </View>\r\n        <View style={styles.divider}></View>\r\n        <View style={styles.statItem}>\r\n          <Text style={styles.statIcon}>üìç</Text>\r\n          <Text style={styles.statValue}>{sortedOrders.length}</Text>\r\n          <Text style={styles.statLabel}>Disponibili</Text>\r\n        </View>\r\n      </View>\r\n\r\n      {/* Map Toggle Button */}\r\n      <TouchableOpacity style={styles.mapToggleBtn} onPress={() => setShowMap(!showMap)}>\r\n        <Text style={styles.mapToggleBtnText}>\r\n          {showMap ? 'üó∫Ô∏è Chiudi Mappa' : 'üó∫Ô∏è Apri Mappa'}\r\n        </Text>\r\n      </TouchableOpacity>\r\n\r\n      {/* Map View - Platform-specific */}\r\n      {showMap && Platform.OS !== 'web' && MapView && (\r\n        <View style={styles.mapContainer}>\r\n          <MapView\r\n            style={styles.map}\r\n            region={mapRegion}\r\n            onRegionChange={setMapRegion}\r\n          >\r\n            {/* Current Rider Location */}\r\n            <Marker\r\n              coordinate={{\r\n                latitude: location?.latitude || 40.7128,\r\n                longitude: location?.longitude || -74.0060,\r\n              }}\r\n              title=\"La tua posizione\"\r\n              description=\"Sei qui\"\r\n              pinColor=\"#22863a\"\r\n            />\r\n            {/* Available Orders on Map */}\r\n            {sortedOrders.map((order, index) => (\r\n              <Marker\r\n                key={order.id || index}\r\n                coordinate={{\r\n                  latitude: 40.7128 + (Math.random() - 0.5) * 0.02,\r\n                  longitude: -74.0060 + (Math.random() - 0.5) * 0.02,\r\n                }}\r\n                title={`${order.items?.[0]?.name || 'Ordine'} - ‚Ç¨${formatCurrency(order.total_amount)}`}\r\n                description={order.delivery_address}\r\n                pinColor=\"#3182ce\"\r\n              />\r\n            ))}\r\n          </MapView>\r\n        </View>\r\n      )}\r\n\r\n      {/* Web Map - Real Leaflet Map */}\r\n      {showMap && Platform.OS === 'web' && (\r\n        <LeafletMapComponent orders={sortedOrders} riderLocation={location} />\r\n      )}\r\n      {sortedOrders.length === 0 ? (\r\n        <View style={styles.emptyState}>\r\n          <Text style={styles.emptyIcon}>üì≠</Text>\r\n          <Text style={styles.emptyTitle}>Nessun ordine</Text>\r\n          <Text style={styles.emptyText}>Non ci sono ordini disponibili al momento</Text>\r\n          <TouchableOpacity style={styles.refreshBtn} onPress={loadAvailableOrders}>\r\n            <Text style={styles.refreshBtnText}>üîÑ Riprova</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      ) : (\r\n        <FlatList\r\n          data={sortedOrders}\r\n          keyExtractor={item => item.id?.toString() || Math.random().toString()}\r\n          renderItem={({ item }) => (\r\n            <View style={styles.orderCard}>\r\n              {/* Top Bar con distanza e prezzo */}\r\n              <View style={styles.cardHeader}>\r\n                <View style={styles.categoryBadge}>\r\n                  <Text style={styles.categoryIcon}>üçî</Text>\r\n                </View>\r\n                <View style={styles.headerInfo}>\r\n                  <Text style={styles.orderTitle} numberOfLines={1}>\r\n                    {item.items?.[0]?.name || 'Ordine'}\r\n                  </Text>\r\n                  <Text style={styles.orderMeta}>\r\n                    üìç {(item.distance || 2).toFixed(1)} km ‚Ä¢ ‚è±Ô∏è 20-30 min\r\n                  </Text>\r\n                </View>\r\n                <View style={styles.distancePriceBox}>\r\n                  <Text style={styles.earnAmount}>‚Ç¨{formatCurrency(toNumber(item.total_amount) * 0.15)}</Text>\r\n                  <Text style={styles.earnLabel}>guadagno</Text>\r\n                </View>\r\n              </View>\r\n\r\n              {/* Address section */}\r\n              <View style={styles.addressSection}>\r\n                <Text style={styles.addressLabel}>üìç Consegna a:</Text>\r\n                <Text style={styles.address} numberOfLines={2}>\r\n                  {item.delivery_address || 'Indirizzo non disponibile'}\r\n                </Text>\r\n              </View>\r\n\r\n              {/* Price total */}\r\n              <View style={styles.priceSection}>\r\n                <View>\r\n                  <Text style={styles.priceLabel}>Importo ordine</Text>\r\n                  <Text style={styles.priceValue}>‚Ç¨{formatCurrency(item.total_amount)}</Text>\r\n                </View>\r\n                <View style={styles.earnBadge}>\r\n                  <Text style={styles.earnBadgeText}>\r\n                    +‚Ç¨{formatCurrency(toNumber(item.total_amount) * 0.15)} guadagno\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n\r\n              {/* Accept Button */}\r\n              <TouchableOpacity\r\n                style={styles.acceptBtn}\r\n                onPress={() => handleAcceptOrder(item.id)}\r\n              >\r\n                <Text style={styles.acceptBtnText}>‚úÖ Accetta Ordine</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          )}\r\n          refreshing={refreshing}\r\n          onRefresh={loadAvailableOrders}\r\n          contentContainerStyle={styles.listContainer}\r\n          scrollEnabled={true}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#f8f9fa',\r\n  },\r\n  header: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 20,\r\n    paddingTop: 20,\r\n    paddingBottom: 25,\r\n    backgroundColor: '#1a1a2e',\r\n    marginTop: 0,\r\n  },\r\n  headerTitle: {\r\n    fontSize: 24,\r\n    fontWeight: '700',\r\n    color: '#fff',\r\n    marginBottom: 4,\r\n  },\r\n  headerSubtitle: {\r\n    fontSize: 13,\r\n    color: '#a0aec0',\r\n    fontWeight: '400',\r\n  },\r\n  logoutBtn: {\r\n    width: 45,\r\n    height: 45,\r\n    borderRadius: 22.5,\r\n    backgroundColor: 'rgba(255,255,255,0.15)',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  logoutIcon: {\r\n    fontSize: 22,\r\n  },\r\n  statsBar: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-around',\r\n    alignItems: 'center',\r\n    paddingVertical: 16,\r\n    paddingHorizontal: 10,\r\n    backgroundColor: '#fff',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#eee',\r\n  },\r\n  statItem: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n  },\r\n  statIcon: {\r\n    fontSize: 22,\r\n    marginBottom: 6,\r\n  },\r\n  statValue: {\r\n    fontSize: 18,\r\n    fontWeight: '700',\r\n    color: '#1a1a2e',\r\n    marginBottom: 2,\r\n  },\r\n  statLabel: {\r\n    fontSize: 11,\r\n    color: '#718096',\r\n    fontWeight: '500',\r\n  },\r\n  divider: {\r\n    width: 1,\r\n    height: 40,\r\n    backgroundColor: '#e2e8f0',\r\n    marginHorizontal: 5,\r\n  },\r\n  emptyState: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 20,\r\n  },\r\n  emptyIcon: {\r\n    fontSize: 80,\r\n    marginBottom: 20,\r\n  },\r\n  emptyTitle: {\r\n    fontSize: 20,\r\n    fontWeight: '600',\r\n    color: '#1a1a2e',\r\n    marginBottom: 8,\r\n  },\r\n  emptyText: {\r\n    fontSize: 14,\r\n    color: '#718096',\r\n    textAlign: 'center',\r\n    marginBottom: 20,\r\n  },\r\n  refreshBtn: {\r\n    paddingHorizontal: 24,\r\n    paddingVertical: 12,\r\n    backgroundColor: '#3182ce',\r\n    borderRadius: 8,\r\n  },\r\n  refreshBtnText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    fontSize: 14,\r\n  },\r\n  listContainer: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 12,\r\n    paddingBottom: 20,\r\n  },\r\n  orderCard: {\r\n    backgroundColor: '#fff',\r\n    borderRadius: 14,\r\n    padding: 16,\r\n    marginVertical: 10,\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n    shadowColor: '#000',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.08,\r\n    shadowRadius: 4,\r\n    elevation: 3,\r\n  },\r\n  cardHeader: {\r\n    flexDirection: 'row',\r\n    alignItems: 'center',\r\n    marginBottom: 12,\r\n  },\r\n  categoryBadge: {\r\n    width: 50,\r\n    height: 50,\r\n    borderRadius: 25,\r\n    backgroundColor: '#fef3c7',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    marginRight: 12,\r\n  },\r\n  categoryIcon: {\r\n    fontSize: 28,\r\n  },\r\n  headerInfo: {\r\n    flex: 1,\r\n  },\r\n  orderTitle: {\r\n    fontSize: 15,\r\n    fontWeight: '700',\r\n    color: '#1a1a2e',\r\n    marginBottom: 4,\r\n  },\r\n  orderMeta: {\r\n    fontSize: 12,\r\n    color: '#718096',\r\n    fontWeight: '500',\r\n  },\r\n  distancePriceBox: {\r\n    paddingVertical: 6,\r\n    paddingHorizontal: 12,\r\n    backgroundColor: '#f0f4f8',\r\n    borderRadius: 8,\r\n    alignItems: 'center',\r\n  },\r\n  earnAmount: {\r\n    fontSize: 16,\r\n    fontWeight: '700',\r\n    color: '#22863a',\r\n    marginBottom: 2,\r\n  },\r\n  earnLabel: {\r\n    fontSize: 10,\r\n    color: '#718096',\r\n    fontWeight: '500',\r\n  },\r\n  addressSection: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    backgroundColor: '#f7fafc',\r\n    borderRadius: 10,\r\n    marginBottom: 12,\r\n    borderLeftWidth: 3,\r\n    borderLeftColor: '#3182ce',\r\n  },\r\n  addressLabel: {\r\n    fontSize: 12,\r\n    color: '#718096',\r\n    fontWeight: '600',\r\n    marginBottom: 6,\r\n  },\r\n  address: {\r\n    fontSize: 14,\r\n    color: '#1a1a2e',\r\n    fontWeight: '500',\r\n    lineHeight: 20,\r\n  },\r\n  priceSection: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 10,\r\n    backgroundColor: '#f0fdf4',\r\n    borderRadius: 10,\r\n    marginBottom: 12,\r\n  },\r\n  priceLabel: {\r\n    fontSize: 12,\r\n    color: '#718096',\r\n    fontWeight: '500',\r\n    marginBottom: 2,\r\n  },\r\n  priceValue: {\r\n    fontSize: 16,\r\n    fontWeight: '700',\r\n    color: '#1a1a2e',\r\n  },\r\n  earnBadge: {\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 6,\r\n    backgroundColor: '#dcfce7',\r\n    borderRadius: 6,\r\n  },\r\n  earnBadgeText: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n    color: '#22863a',\r\n  },\r\n  acceptBtn: {\r\n    paddingVertical: 14,\r\n    backgroundColor: '#22863a',\r\n    borderRadius: 10,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    flexDirection: 'row',\r\n    shadowColor: '#22863a',\r\n    shadowOffset: { width: 0, height: 2 },\r\n    shadowOpacity: 0.2,\r\n    shadowRadius: 3,\r\n    elevation: 4,\r\n  },\r\n  acceptBtnText: {\r\n    color: '#fff',\r\n    fontWeight: '700',\r\n    fontSize: 15,\r\n  },\r\n  mapToggleBtn: {\r\n    marginHorizontal: 12,\r\n    marginVertical: 10,\r\n    paddingVertical: 12,\r\n    paddingHorizontal: 16,\r\n    backgroundColor: '#3182ce',\r\n    borderRadius: 10,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  mapToggleBtnText: {\r\n    color: '#fff',\r\n    fontWeight: '600',\r\n    fontSize: 14,\r\n  },\r\n  mapContainer: {\r\n    height: 280,\r\n    marginHorizontal: 12,\r\n    marginVertical: 10,\r\n    borderRadius: 14,\r\n    overflow: 'hidden',\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n  },\r\n  map: {\r\n    flex: 1,\r\n  },\r\n  mapFallbackContainer: {\r\n    height: 280,\r\n    marginHorizontal: 12,\r\n    marginVertical: 10,\r\n    borderRadius: 14,\r\n    overflow: 'hidden',\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n    backgroundColor: '#f7fafc',\r\n  },\r\n  mapFallback: {\r\n    flex: 1,\r\n    paddingHorizontal: 12,\r\n    paddingVertical: 12,\r\n  },\r\n  mapFallbackHeader: {\r\n    marginBottom: 12,\r\n    paddingBottom: 8,\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e2e8f0',\r\n  },\r\n  mapFallbackTitle: {\r\n    fontSize: 14,\r\n    fontWeight: '700',\r\n    color: '#1a1a2e',\r\n  },\r\n  coordinateItem: {\r\n    paddingVertical: 10,\r\n    paddingHorizontal: 8,\r\n  },\r\n  coordinateLabel: {\r\n    fontSize: 12,\r\n    fontWeight: '600',\r\n    color: '#22863a',\r\n    marginBottom: 4,\r\n  },\r\n  orderNameSmall: {\r\n    fontSize: 13,\r\n    fontWeight: '600',\r\n    color: '#1a1a2e',\r\n    marginBottom: 4,\r\n  },\r\n  coordinateValue: {\r\n    fontSize: 11,\r\n    color: '#718096',\r\n    fontFamily: 'monospace',\r\n    marginBottom: 4,\r\n  },\r\n  addressSmall: {\r\n    fontSize: 11,\r\n    color: '#718096',\r\n    lineHeight: 15,\r\n  },\r\n  noOrdersText: {\r\n    fontSize: 13,\r\n    color: '#718096',\r\n    textAlign: 'center',\r\n    paddingVertical: 20,\r\n  },\r\n  dividerFull: {\r\n    height: 1,\r\n    backgroundColor: '#e2e8f0',\r\n    marginVertical: 8,\r\n  },\r\n  leafletMapContainer: {\r\n    marginHorizontal: 12,\r\n    marginVertical: 10,\r\n    borderRadius: 14,\r\n    overflow: 'hidden',\r\n    borderWidth: 1,\r\n    borderColor: '#e2e8f0',\r\n    backgroundColor: '#f7fafc',\r\n  },\r\n  leafletMapHeader: {\r\n    paddingHorizontal: 16,\r\n    paddingVertical: 12,\r\n    backgroundColor: '#f7fafc',\r\n    borderBottomWidth: 1,\r\n    borderBottomColor: '#e2e8f0',\r\n  },\r\n  leafletMapTitle: {\r\n    fontSize: 16,\r\n    fontWeight: '700',\r\n    color: '#1a1a2e',\r\n    marginBottom: 4,\r\n  },\r\n  leafletMapSubtitle: {\r\n    fontSize: 12,\r\n    color: '#718096',\r\n    fontWeight: '500',\r\n  },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}